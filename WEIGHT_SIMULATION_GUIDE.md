# 烟叶称重模拟系统使用说明

## 📋 功能概述

本系统实现了通过两个按钮模拟真实物品重量放置的功能，并在称重界面和管理员界面中实时显示预检比例和重量变化。

## 🚀 主要功能

### 1. 重量模拟功能
- **模拟轻重量按钮**: 随机生成 1-5kg 的重量
- **模拟重重量按钮**: 随机生成 5-15kg 的重量
- 每次点击都会更新当前重量显示
- 自动更新预检数据统计

### 2. 称重界面显示
- **实时重量显示**: 大号字体显示当前重量
- **预检比例显示**: 显示已完成/总数量 (如: 5/50)
- **预检重量显示**: 显示累计重量
- **重量模拟按钮**: 两个按钮用于模拟不同重量范围

### 3. 管理员界面
- **预检统计信息**: 总数、已完成数、总重量、平均重量
- **烟叶分类统计**: A/B/C/D 四个等级的预检和实际重量
- **数据实时同步**: 与称重界面数据同步更新

## 🎯 使用步骤

### 步骤1: 启动应用
1. 打开烟叶称重应用
2. 进入主界面(称重界面)

### 步骤2: 模拟重量放置
1. 点击 **"模拟轻重量(1-5kg)"** 按钮
   - 系统随机生成 1-5kg 的重量
   - 重量显示区域更新
   - 预检数据自动更新

2. 点击 **"模拟重重量(5-15kg)"** 按钮
   - 系统随机生成 5-15kg 的重量
   - 重量显示区域更新
   - 预检数据自动更新

### 步骤3: 查看预检信息
在称重界面右侧可以看到：
- 预检比例: 显示当前进度 (如: 3/50)
- 预检重量: 显示累计重量 (如: 15.67 kg)

### 步骤4: 访问管理员界面
1. 点击右上角的 **"管理员界面"** 菜单项
2. 进入管理员界面查看详细统计信息

### 步骤5: 查看详细统计
管理员界面显示：
- **预检统计**: 总数、完成数、总重量、平均重量
- **烟叶分类**: A/B/C/D等级的详细重量数据
- **实时更新**: 数据与称重界面同步

## 🔧 重要功能说明

### 数据同步机制
- 称重界面的重量变化会自动同步到管理员界面
- 使用回调接口实现跨ViewModel数据通信
- 实时更新预检比例和重量统计

### 重量模拟算法
```java
// 轻重量模拟: 1-5kg
double lightWeight = 1.0 + Math.random() * 4.0;

// 重重量模拟: 5-15kg  
double heavyWeight = 5.0 + Math.random() * 10.0;
```

### 预检数据计算
- **预检比例**: 已完成数量/总数量
- **累计重量**: 所有模拟重量的总和
- **平均重量**: 累计重量/已完成数量

## 🎨 界面说明

### 称重界面布局
```
┌─────────────────────┬─────────────────┐
│  农户信息           │  预检信息       │
│  ┌─────────────────┐│  ┌─────────────┐│
│  │  实时重量显示   ││  │  预检比例   ││
│  │   XX.XX kg     ││  │   X/XX     ││
│  └─────────────────┘│  │  预检重量   ││
│  ┌─────────────────┐│  │  XX.XX kg  ││
│  │  上等烟 中等烟  ││  └─────────────┘│
│  │  下等烟        ││                 │
│  └─────────────────┘│                 │
│  ┌─────────────────┐│                 │
│  │  去皮   打印    ││                 │
│  └─────────────────┘│                 │
│  ┌─────────────────┐│                 │
│  │模拟轻重量|模拟重重量││                 │
│  └─────────────────┘│                 │
└─────────────────────┴─────────────────┘
```

### 管理员界面布局
```
┌─────────────────────────────────────────┐
│              烟叶称重管理系统            │
├─────────────────────────────────────────┤
│  预检统计信息                           │
│  ┌─────┬─────┬─────┬─────┐              │
│  │总数 │完成数│总重量│平均  │              │
│  │ 50 │  5  │15.67│3.13 │              │
│  └─────┴─────┴─────┴─────┘              │
├─────────────────────────────────────────┤
│  烟叶分类统计                           │
│  ┌──┬──────┬──────┬────┐               │
│  │级│预检量│实际量│操作│               │
│  ├──┼──────┼──────┼────┤               │
│  │A │25.00 │23.60 │查看│               │
│  │B │20.00 │18.45 │查看│               │
│  │C │15.00 │14.75 │查看│               │
│  │D │10.00 │ 9.50 │查看│               │
│  └──┴──────┴──────┴────┘               │
├─────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐              │
│  │ 刷新数据 │  │ 导出数据 │              │
│  └─────────┘  └─────────┘              │
└─────────────────────────────────────────┘
```

## 🛠️ 技术实现

### 关键组件
1. **WeighingViewModel**: 管理称重逻辑和重量模拟
2. **AdminViewModel**: 管理统计数据和烟叶分类
3. **HardwareSimulator**: 模拟硬件重量数据
4. **DataSyncCallback**: 跨ViewModel数据同步接口

### 数据流转
```
用户点击模拟按钮 → WeighingViewModel → HardwareSimulator → 
重量数据更新 → 通知AdminViewModel → 更新管理员界面
```

## 📊 数据示例

### 重量变化示例
```
初始状态: 0.00 kg, 预检比例: 0/50
点击轻重量: 2.34 kg, 预检比例: 1/50
点击重重量: 8.67 kg, 预检比例: 2/50
累计重量: 11.01 kg, 平均重量: 5.51 kg
```

### 管理员界面数据
```
预检统计:
- 总预检数: 50
- 已完成数: 2  
- 总重量: 11.01 kg
- 平均重量: 5.51 kg

烟叶分类:
- A级: 预检25.00kg → 实际23.60kg
- B级: 预检20.00kg → 实际18.45kg  
- C级: 预检15.00kg → 实际14.75kg
- D级: 预检10.00kg → 实际9.50kg
```

## 🔄 重置功能

### 重置预检数据
1. 在称重界面点击 **"重置预检数据"** 按钮
2. 所有预检数据归零
3. 重量显示回到初始状态
4. 管理员界面同步更新

## 📝 注意事项

1. **数据同步**: 称重界面和管理员界面数据完全同步
2. **重量范围**: 轻重量1-5kg，重重量5-15kg
3. **界面方向**: 应用锁定为横屏模式
4. **实时更新**: 所有数据变化都是实时的
5. **模拟逼真**: 重量变化模拟真实称重过程

## 🎯 应用场景

1. **开发测试**: 无需真实硬件即可测试称重逻辑
2. **功能演示**: 向客户展示系统功能
3. **用户培训**: 培训操作人员使用系统
4. **数据验证**: 验证称重算法和统计逻辑

通过这个模拟系统，用户可以完整体验烟叶称重的整个流程，从重量获取到数据统计，再到管理员监控，形成了一个闭环的业务流程。 